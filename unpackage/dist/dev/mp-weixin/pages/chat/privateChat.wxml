<view class="chatInterface"><block wx:if="{{userInfo.memberRole!=1}}"><uni-grid class="grid vue-ref" vue-id="26079ee9-1" column="{{3}}" show-border="{{false}}" square="{{false}}" data-ref="grid" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{topList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-grid-item vue-id="{{('26079ee9-2-'+index)+','+('26079ee9-1')}}" index="{{index}}" data-event-opts="{{[['tap',[['tapGrid',['$0'],[[['topList','',index]]]]]]]}}" bindtap="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="grid-item-box"><text class="{{['yzb',item.icon]}}" style="{{'color:'+(item.color)+';'}}"></text><text class="text">{{item.text}}</text><block wx:if="{{item.badge}}"><view class="grid-dot"><uni-badge vue-id="{{('26079ee9-3-'+index)+','+('26079ee9-2-'+index)}}" text="{{item.badge}}" type="{{item.type}}" bind:__l="__l"></uni-badge></view></block></view></uni-grid-item></block></uni-grid></block><view class="{{['scroll-view',userInfo.memberRole!=1?'scroll-top':'']}}"><view class="all-history-loaded">{{allHistoryLoaded?'已经没有更多的历史消息':'下拉获取历史消息'}}</view><block wx:for="{{$root.l0}}" wx:for-item="message" wx:for-index="index" wx:key="messageId"><view><view class="time-lag">{{message.m0}}</view><view class="{{['message-item',(message.$orig.senderId==(userInfo&&userInfo.memberSn))?'self':'']}}"><block wx:if="{{message.$orig.senderId!=(userInfo&&userInfo.memberSn)}}"><view class="avatar"><image src="{{friend.avatar}}"></image></view></block><block wx:else><view class="avatar"><image src="{{userInfo.avatar}}"></image></view></block><view class="contents"><block wx:if="{{message.$orig.status=='sending'}}"><view class="pending _b"></view></block><block wx:if="{{message.$orig.status=='fail'}}"><view class="send-fail _b"></view></block><block wx:if="{{message.$orig.type=='text'}}"><view><rich-text nodes="{{message.m1}}"></rich-text></view></block><block wx:if="{{message.$orig.type=='image'}}"><image class="image-content" src="{{message.$orig.payload.url}}" data-url="{{message.$orig.payload.url}}" mode="widthFix" data-event-opts="{{[['tap',[['showImageFullScreen',['$event']]]]]}}" bindtap="__e"></image></block><block wx:if="{{message.$orig.type=='video'}}"><view class="video-snapshot" data-url="{{message.$orig.payload.video.url}}" data-event-opts="{{[['tap',[['playVideo',['$event']]]]]}}" bindtap="__e"><image src="{{message.$orig.payload.thumbnail.url}}" mode="aspectFit"></image><view class="video-play-icon"></view></view></block><block wx:if="{{message.$orig.type=='audio'}}"><go-easy-audio-player vue-id="{{'26079ee9-4-'+index}}" src="{{message.$orig.payload.url}}" duration="{{message.$orig.payload.duration}}" bind:__l="__l"></go-easy-audio-player></block><block wx:if="{{message.$orig.type=='order'}}"><view class="custom-message"><view class="title"><image src="/static/images/dingdan.png"></image><text>自定义消息</text></view><view class="custom-message-item">{{"编号："+message.$orig.payload.number}}</view><view class="custom-message-item">{{"商品: "+message.$orig.payload.goods}}</view><view class="custom-message-item">{{"金额: "+message.$orig.payload.price}}</view></view></block><block wx:if="{{message.$orig.type=='resume'}}"><view class="resume-message"><view data-event-opts="{{[['tap',[['toDetail',['$0'],[[['messages','messageId',message.$orig.messageId]]]]]]]}}" class="resume" bindtap="__e"><block wx:if="{{message.$orig.payload.type=='pdf'}}"><text class="yzb yzb-pdf resume-left"></text></block><block wx:else><block wx:if="{{message.$orig.payload.type=='xls'}}"><text class="yzb yzb-excel resume-left"></text></block><block wx:else><block wx:if="{{message.$orig.payload.type=='xlsx'}}"><text class="yzb yzb-excel resume-left"></text></block><block wx:else><block wx:if="{{message.$orig.payload.type=='word'}}"><text class="yzb yzb-word resume-left"></text></block><block wx:else><block wx:if="{{message.$orig.payload.type=='ppt'}}"><text class="yzb yzb-ppt resume-left"></text></block><block wx:else><text class="yzb yzb-pdf resume-left"></text></block></block></block></block></block><view class="resume-right"><text class="resume-title ellipsis-oneline">{{message.$orig.payload.name}}</text><text class="resume-note">点击可预览简历内容，可下载等</text></view></view></view></block></view></view></view></block></view><block wx:if="{{!video.visible}}"><view class="action-box"><view class="action-top"><view data-event-opts="{{[['tap',[['switchAudioKeyboard',['$event']]]]]}}" class="{{[audio.visible?'record-icon record-open':'record-icon']}}" catchtap="__e"></view><block wx:if="{{audio.visible}}"><view data-event-opts="{{[['touchstart',[['onRecordStart',['$event']]]],['touchend',[['onRecordEnd',['$event']]]]]}}" class="record-input" bindtouchstart="__e" bindtouchend="__e">{{audio.recording?'松开发送':'按住录音'}}</view></block><block wx:else><view class="message-input"><input type="text" maxlength="700" placeholder="发送消息" data-event-opts="{{[['focus',[['messageInputFocusin',['$event']]]],['input',[['__set_model',['','content','$event',[]]]]]]}}" value="{{content}}" bindfocus="__e" bindinput="__e"/></view></block><view data-event-opts="{{[['tap',[['showEmoji',['$event']]]]]}}" class="file-icon emoji-icon" catchtap="__e"></view><view data-event-opts="{{[['tap',[['showMore',['$event']]]]]}}" class="file-icon more-icon" catchtap="__e"></view><label data-event-opts="{{[['tap',[['sendTextMessage',['$event']]]]]}}" class="send-message-btn _span" catchtap="__e">发送</label></view><block wx:if="{{emoji.show}}"><view class="action-bottom" style="flex-wrap:wrap;"><block wx:for="{{$root.l1}}" wx:for-item="emojiItem" wx:for-index="emojiKey" wx:key="$index"><image class="emoji-item" src="{{emoji.url+emojiItem.$orig}}" data-event-opts="{{[['tap',[['selectEmoji',[emojiKey]]]]]}}" catchtap="__e"></image></block></view></block><block wx:if="{{more.show}}"><view class="action-bottom"><view data-event-opts="{{[['tap',[['sendImage',['$event']]]]]}}" class="more-item" catchtap="__e"><image src="/static/images/tupian.png"></image><text>图片</text></view><view data-event-opts="{{[['tap',[['sendVideo',['$event']]]]]}}" class="more-item" catchtap="__e"><image src="/static/images/shipin.png"></image><text>视频</text></view></view></block></view></block><block wx:if="{{audio.recording}}"><view class="record-loading"></view></block><block wx:if="{{video.visible}}"><video src="{{video.url}}" id="videoPlayer" data-event-opts="{{[['fullscreenchange',[['onVideoFullScreenChange',['$event']]]]]}}" bindfullscreenchange="__e"></video></block><uni-popup class="vue-ref" vue-id="26079ee9-5" background-color="#fff" data-ref="popup" data-event-opts="{{[['^change',[['change']]]]}}" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="pop-content"><view class="pop-top"><text class="pop-title">简历选择</text><text data-event-opts="{{[['tap',[['closePop',['$event']]]]]}}" class="yzb yzb-shanchu" bindtap="__e"></text></view><uni-list vue-id="{{('26079ee9-6')+','+('26079ee9-5')}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{$root.l2}}" wx:for-item="item" wx:for-index="index" wx:key="index"><uni-list-item vue-id="{{('26079ee9-7-'+index)+','+('26079ee9-6')}}" title="{{item.$orig.fileName+'.'+item.$orig.fileExt}}" note="{{item.m2}}" data-event-opts="{{[['tap',[['selectResume',['$0'],[[['resumeFileList','',index]]]]]]]}}" bindtap="__e" bind:__l="__l"></uni-list-item></block></uni-list></view></uni-popup></view>