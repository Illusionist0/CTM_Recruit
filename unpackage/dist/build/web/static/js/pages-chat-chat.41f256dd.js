(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat"],{2335:function(t,e,a){"use strict";var n=a("44a7"),i=a.n(n);i.a},2802:function(t,e,a){"use strict";a.r(e);var n=a("989d"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"3d62":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uniGrid:a("4ec3").default,uniGridItem:a("eeaa").default,uniBadge:a("8dc1").default,uniList:a("e338").default,uniListChat:a("09cb").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"top"},[a("v-uni-view",{staticClass:"bg"}),1==t.userInfo.memberRole?a("v-uni-view",{staticClass:"v-grid"},[a("uni-grid",{staticClass:"grid",attrs:{column:3,"show-border":!1,square:!1}},t._l(t.list2,(function(e,n){return a("uni-grid-item",{key:n,attrs:{index:n},nativeOn:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.tapGrid(e)}}},[a("v-uni-view",{staticClass:"grid-item-box"},[a("v-uni-text",{staticClass:"yzb",class:e.icon,style:{color:e.color}}),a("v-uni-text",{staticClass:"text"},[t._v(t._s(e.text))]),e.badge?a("v-uni-view",{staticClass:"grid-dot"},[a("uni-badge",{attrs:{text:e.badge,type:e.type}})],1):t._e()],1)],1)})),1)],1):a("v-uni-view",{staticClass:"v-grid"},[a("uni-grid",{staticClass:"grid",attrs:{column:3,"show-border":!1,square:!1}},t._l(t.list,(function(e,n){return a("uni-grid-item",{key:n,attrs:{index:n},nativeOn:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.tapGrid(e)}}},[a("v-uni-view",{staticClass:"grid-item-box"},[a("v-uni-text",{staticClass:"yzb",class:e.icon,style:{color:e.color}}),a("v-uni-text",{staticClass:"text"},[t._v(t._s(e.text))]),e.badge?a("v-uni-view",{staticClass:"grid-dot"},[a("uni-badge",{attrs:{text:e.badge,type:e.type}})],1):t._e()],1)],1)})),1)],1)],1),t.loading?a("v-uni-view",{staticClass:"loading"},[a("v-uni-text",[t._v("加载中...")])],1):t._e(),0!=t.loading||0!=t.conversations.length||t.notice?t._e():a("v-uni-view",{staticClass:"nodata"},[a("v-uni-text",[t._v("暂无消息")])],1),t.notice||0!=t.conversations.length?a("uni-list",{attrs:{border:!0}},[t.notice?[a("uni-list-chat",{attrs:{title:"系统通知",avatar:"/static/img/notice.png",note:t.notice.title,time:t.formatCreateTime(t.notice.createTime),"badge-positon":"left","badge-text":"dot",showBadge:!1,clickable:t.clickable},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toNotice()}}})]:t._e(),t._l(t.conversations,(function(e,n){return a("uni-list-chat",{key:n,attrs:{title:e.data.name,avatar:e.data.avatar,note:e.lastMessage.payload.text,time:t.formatDate(e.lastMessage.timestamp),"badge-positon":"left","badge-text":e.unread,showBadge:!0,clickable:t.clickable},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.toChat(e)},longTimeClick:function(a){arguments[0]=a=t.$handleEvent(a),t.longTimeClick(e)}}})}))],2):t._e()],1)},o=[]},"3dfe":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uni-badge--x"},[t._t("default"),t.text?a("v-uni-text",{staticClass:"uni-badge",class:t.classNames,style:[t.badgeWidth,t.positionStyle,t.customStyle,t.dotStyle],on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick()}}},[t._v(t._s(t.displayValue))]):t._e()],2)},i=[]},"3eb3":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 背景颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.top[data-v-c2feca84]{width:100%;display:flex;flex-direction:column;align-items:center}.top .bg[data-v-c2feca84]{background-color:#01beff;height:%?120?%;width:100%}.top .v-grid[data-v-c2feca84]{padding:0 0 %?15?% 0;margin-top:%?-100?%;background-color:#fff;width:90%;border-radius:%?24?%;box-shadow:0 0 %?20?% rgba(0,0,0,.15);margin-bottom:%?30?%}.top .image[data-v-c2feca84]{width:%?80?%;height:%?80?%}.top .grid-item-box[data-v-c2feca84]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:%?10?% 0}.top .grid-dot[data-v-c2feca84]{position:absolute;top:5px;right:15px}.top .yzb[data-v-c2feca84]{font-size:%?85?%;color:#01beff;height:%?125?%}.loading[data-v-c2feca84]{width:100%;display:flex;align-items:center;justify-content:center;margin-top:%?20?%}.loading uni-text[data-v-c2feca84]{color:#666}.nodata[data-v-c2feca84]{display:flex;justify-content:center;align-items:center;color:#666;font-size:%?32?%;margin-top:%?250?%}',""]),t.exports=e},"44a7":function(t,e,a){var n=a("4af5");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("d5714534",n,!0,{sourceMap:!1,shadowMode:!1})},"4af5":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 背景颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-badge--x[data-v-63b1cda0]{display:inline-block;position:relative}.uni-badge--absolute[data-v-63b1cda0]{position:absolute}.uni-badge--small[data-v-63b1cda0]{-webkit-transform:scale(.8);transform:scale(.8);-webkit-transform-origin:center center;transform-origin:center center}.uni-badge[data-v-63b1cda0]{display:flex;overflow:hidden;box-sizing:border-box;justify-content:center;flex-direction:row;height:20px;line-height:18px;color:#fff;border-radius:100px;background-color:#909399;background-color:initial;border:1px solid #fff;text-align:center;font-family:Helvetica Neue,Helvetica,sans-serif;font-size:12px;z-index:999;cursor:pointer}.uni-badge--info[data-v-63b1cda0]{color:#fff;background-color:#909399}.uni-badge--primary[data-v-63b1cda0]{background-color:#2979ff}.uni-badge--success[data-v-63b1cda0]{background-color:#4cd964}.uni-badge--warning[data-v-63b1cda0]{background-color:#f0ad4e}.uni-badge--error[data-v-63b1cda0]{background-color:#dd524d}.uni-badge--inverted[data-v-63b1cda0]{padding:0 5px 0 0;color:#909399}.uni-badge--info-inverted[data-v-63b1cda0]{color:#909399;background-color:initial}.uni-badge--primary-inverted[data-v-63b1cda0]{color:#2979ff;background-color:initial}.uni-badge--success-inverted[data-v-63b1cda0]{color:#4cd964;background-color:initial}.uni-badge--warning-inverted[data-v-63b1cda0]{color:#f0ad4e;background-color:initial}.uni-badge--error-inverted[data-v-63b1cda0]{color:#dd524d;background-color:initial}',""]),t.exports=e},"535b":function(t,e,a){"use strict";a.r(e);var n=a("b630"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"5dc0":function(t,e,a){"use strict";var n=a("7325"),i=a.n(n);i.a},7325:function(t,e,a){var n=a("3eb3");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("73a30490",n,!0,{sourceMap:!1,shadowMode:!1})},"8dc1":function(t,e,a){"use strict";a.r(e);var n=a("3dfe"),i=a("535b");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("2335");var s=a("f0c5"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"63b1cda0",null,!1,n["a"],void 0);e["default"]=r.exports},"989d":function(t,e,a){"use strict";a("7a82");var n=a("ee27").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b"),a("d401"),a("25f0"),a("14d9"),a("ac1f"),a("5319");var i=n(a("f07e")),o=n(a("c964")),s=n(a("f3f3")),r=a("26cb"),c=n(a("3db0")),d=(n(a("b8aa")),n(a("a89b"))),u=a("3a07"),l=n(a("aed1")),f=(uni.getRecorderManager(),{components:{GoEasyAudioPlayer:c.default,mEmptyData:d.default},computed:(0,s.default)((0,s.default)({},(0,r.mapState)(["userInfo"])),(0,r.mapGetters)(["hasLogin"])),data:function(){return{clickable:!0,no_order_1:this.$mAssetsPath.no_order_1,where:{},loading:!1,notice:{title:"荟就业新版本即将上线",summary:"荟就业新版本即将上线，敬请期待~~~~",createTime:"2022-04-26",pic:"/static/logo.png"},unreadTotal:0,conversations:[],list:[{icon:"yzb-ic_xiaoxi_xitongxiaoxi",text:"系统消息",type:"warning",to:this.$mRoutesConfig.notices,color:"#bb8dbb"},{icon:"yzb-fasong",text:"我的投递",type:"success",to:this.$mRoutesConfig.apply,color:"#6ab493"},{icon:"yzb-kanguowode",text:"谁看过我",type:"error",to:this.$mRoutesConfig.visitme,color:"#cac87e",_id:"623f0f3c748f900001fc6853"}],list2:[{icon:"yzb-ic_xiaoxi_xitongxiaoxi",text:"系统消息",type:"error",to:this.$mRoutesConfig.notices,color:"#bb8dbb"},{icon:"yzb-fasong",text:"收到简历",type:"error",to:this.$mRoutesConfig.apply,color:"#6ab493"},{icon:"yzb-kanguowode",text:"谁看过我",type:"error",to:this.$mRoutesConfig.visitme,color:"#cac87e",_id:"623f0f3c748f900001fc6853"}]}},onLoad:function(){this.getNoticeList()},onShow:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.initData();case 1:case"end":return e.stop()}}),e)})))()},methods:{initData:function(){if(this.hasLogin){"disconnected"===this.goEasy.getConnectionStatus()&&(getApp().globalData.imService=new l.default(this.goEasy,this.GoEasy),getApp().globalData.imService.connect(this.userInfo));var t=this;this.goEasy.im.on(this.GoEasy.IM_EVENT.CONVERSATIONS_UPDATED,(function(e){t.renderConversations(e)})),this.goEasy.im.latestConversations({onSuccess:function(e){var a=e.content;t.renderConversations(a)},onFailed:function(t){console.log("失败获取最新会话列表, code:"+t.code+" content:"+t.content)}})}},getNoticeList:function(){var t=this;return(0,o.default)((0,i.default)().mark((function e(){var a,n;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={page:1,limit:1},e.next=3,t.$apis.getNoticeList(a);case 3:n=e.sent,n.data.length>0&&(t.notice=n.data[0]);case 5:case"end":return e.stop()}}),e)})))()},onqueryload:function(t){},renderConversations:function(t){this.conversations=t.conversations||[],this.conversations.forEach((function(t,e){"text"==t.lastMessage.type||("video"==t.lastMessage.type?t.lastMessage.payload.text="[视频消息]":"audio"==t.lastMessage.type?t.lastMessage.payload.text="[语音消息]":"image"==t.lastMessage.type?t.lastMessage.payload.text="[图片消息]":"file"==t.lastMessage.type?t.lastMessage.payload.text="[文件消息]":"resume"==t.lastMessage.type&&(t.lastMessage.payload.text="[简历附件]"))}));var e=t.unreadTotal;this.setUnreadAmount(e)},setUnreadAmount:function(t){this.unreadTotal=t,this.unreadTotal>0?uni.setTabBarBadge({index:2,text:this.unreadTotal.toString()}):uni.removeTabBarBadge({index:2})},toChat:function(t){this.$mRouter.push({route:this.$mRoutesConfig.privateChat,query:{id:t.userId,avatar:t.data.avatar,name:t.data.name}})},longTimeClick:function(t){var e=this;uni.showModal({title:"提示",content:"确定要删除该聊天吗？",success:function(a){a.confirm&&e.goEasy.im.removePrivateConversation({userId:t.userId,onSuccess:function(){uni.showToast({icon:"none",title:"删除成功"}),console.log("Remove private conversation successfully.")},onFailed:function(t){uni.showToast({icon:"none",title:"删除失败"+t.content}),console.log("Failed to remove private conversation, code:"+t.code+" content:"+t.content)}})}})},tapGrid:function(t){this.$mRouter.push({route:t.to})},toNotice:function(){this.$mRouter.push({route:this.$mRoutesConfig.notices})},formatCreateTime:function(t){if(null==t||""===t)return null;var e=t.replace(/-/g,"/"),a=new Date(e);return(0,u.formatDate)(a,"MM-dd hh:mm")}}});e.default=f},b630:function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a9e3");var n={name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:function(){return[0,0]}},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{width:function(){return 8*String(this.text).length+12},classNames:function(){var t=this.inverted,e=this.type,a=this.size,n=this.absolute;return[t?"uni-badge--"+e+"-inverted":"","uni-badge--"+e,"uni-badge--"+a,n?"uni-badge--absolute":""].join(" ")},positionStyle:function(){if(!this.absolute)return{};var t=this.width/2,e=10;this.isDot&&(t=5,e=5);var a="".concat(-t+this.offset[0],"px"),n="".concat(-e+this.offset[1],"px"),i={rightTop:{right:a,top:n},rightBottom:{right:a,bottom:n},leftBottom:{left:a,bottom:n},leftTop:{left:a,top:n}},o=i[this.absolute];return o||i["rightTop"]},badgeWidth:function(){return{width:"".concat(this.width,"px")}},dotStyle:function(){return this.isDot?{width:"10px",height:"10px",borderRadius:"10px"}:{}},displayValue:function(){var t=this.isDot,e=this.text,a=this.maxNum;return t?"":Number(e)>a?"".concat(a,"+"):e}},methods:{onClick:function(){this.$emit("click")}}};e.default=n},bbdd:function(t,e,a){"use strict";a.r(e);var n=a("3d62"),i=a("2802");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("5dc0");var s=a("f0c5"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"c2feca84",null,!1,n["a"],void 0);e["default"]=r.exports}}]);